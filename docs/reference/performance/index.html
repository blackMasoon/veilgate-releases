
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Veilgate performance characteristics and benchmarking guide.">
      
      
      
        <link rel="canonical" href="https://blackmasoon.github.io/veilgate-releases/reference/performance/">
      
      
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Performance - Veilgate Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#performance" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Veilgate Documentation" class="md-header__button md-logo" aria-label="Veilgate Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Veilgate Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Performance
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="orange"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="orange"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/blackMasoon/veilgate" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    blackMasoon/veilgate
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../overview/" class="md-tabs__link">
          
  
  
  Overview

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../concepts/" class="md-tabs__link">
          
  
  
  Concepts

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../how-to/quickstart-docker-compose/" class="md-tabs__link">
          
  
  
  How-to

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../" class="md-tabs__link">
          
  
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../CONTRIBUTING-DOCS/" class="md-tabs__link">
          
  
  
  Contributing

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Veilgate Documentation" class="md-nav__button md-logo" aria-label="Veilgate Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Veilgate Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/blackMasoon/veilgate" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    blackMasoon/veilgate
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Overview
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    What is Veilgate?
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Concepts
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Concepts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core concepts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/routes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Routes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/upstreams/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Upstreams
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/policies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Policies: auth & rate limiting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/admin-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Admin API & dashboard
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/mcp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MCP tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    How-to
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    How-to
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/quickstart-docker-compose/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quickstart – Docker + docker-compose
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    How-to index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Reference overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Admin API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mcp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MCP configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Contributing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CONTRIBUTING-DOCS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing to docs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#performance-goals" class="md-nav__link">
    <span class="md-ellipsis">
      
        Performance goals
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gateway-benchmark-harness" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gateway benchmark harness
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gateway benchmark harness">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#benchmark-scenarios" class="md-nav__link">
    <span class="md-ellipsis">
      
        Benchmark scenarios
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-benchmarks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Running benchmarks
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Running benchmarks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#available-microbenchmarks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Available microbenchmarks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interpreting-results" class="md-nav__link">
    <span class="md-ellipsis">
      
        Interpreting results
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-tuning" class="md-nav__link">
    <span class="md-ellipsis">
      
        Performance tuning
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance tuning">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connection-pooling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Connection pooling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rate-limiting-scope" class="md-nav__link">
    <span class="md-ellipsis">
      
        Rate limiting scope
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#caching" class="md-nav__link">
    <span class="md-ellipsis">
      
        Caching
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#response-headers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Response headers
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comparison-with-tyk" class="md-nav__link">
    <span class="md-ellipsis">
      
        Comparison with Tyk
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-testing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Load testing
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Load testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-hey" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using hey
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-wrk" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using wrk
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-vegeta" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using vegeta
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#profiling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Profiling
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Profiling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cpu-profiling" class="md-nav__link">
    <span class="md-ellipsis">
      
        CPU profiling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-profiling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Memory profiling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trace" class="md-nav__link">
    <span class="md-ellipsis">
      
        Trace
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#production-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      
        Production monitoring
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="performance">Performance<a class="headerlink" href="#performance" title="Permanent link">&para;</a></h1>
<p>Veilgate is designed to be a lightweight, high-performance API gateway with minimal
overhead compared to direct backend access.</p>
<h2 id="performance-goals">Performance goals<a class="headerlink" href="#performance-goals" title="Permanent link">&para;</a></h2>
<p>Veilgate targets the following performance characteristics:</p>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Target</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>p95 latency overhead</td>
<td>≤ 1ms</td>
<td>Pass-through proxy, small responses</td>
</tr>
<tr>
<td>Throughput</td>
<td>10-20k RPS</td>
<td>2 vCPU, simple routes without TLS</td>
</tr>
<tr>
<td>Memory footprint</td>
<td>&lt; 50MB</td>
<td>Base memory with typical configuration</td>
</tr>
<tr>
<td>Startup time</td>
<td>&lt; 1 second</td>
<td>Cold start to ready</td>
</tr>
</tbody>
</table>
<p>These targets assume:
- Single gateway instance
- No TLS termination at the gateway
- Small response bodies (1-4 KB)
- In-memory rate limiting and caching</p>
<h2 id="gateway-benchmark-harness">Gateway benchmark harness<a class="headerlink" href="#gateway-benchmark-harness" title="Permanent link">&para;</a></h2>
<p>Veilgate ships with a containerized benchmark that stands up Veilgate and Tyk
side-by-side, executes k6 scenarios, and renders an HTML report under
<code>benchmark/report/output/</code>.</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Recommended flow – everything inside the runner container.</span>
./benchmark/run-container.sh<span class="w"> </span>--scenario<span class="w"> </span>full<span class="w"> </span>--build
</code></pre></div>

<p>Key properties:</p>
<ul>
<li><strong>Deterministic warmups</strong> – Every scenario defines <code>warmup_duration</code> and
  <code>repetitions</code> in <code>benchmark/config/scenarios.yaml</code>. The orchestrator performs a
  warmup phase (metrics discarded) and then executes the scenario multiple times,
  aggregating p95/p99, throughput, and error rates with per-run variance in the
  report.</li>
<li><strong>Broader scenario mix</strong> – The default <code>full</code> profile covers unauthenticated,
  authenticated, and rate-limited routes with longer steady-state windows to
  surface queueing effects.</li>
<li><strong>System telemetry</strong> – After each steady-state run the harness captures
  <code>docker stats</code> for Veilgate and Tyk, storing the snapshots under
  <code>benchmark/results/&lt;run&gt;/raw/system/</code>. The HTML report links those files and
  displays CPU%/Mem% inline so regressions can be tied to resource contention.</li>
<li><strong>Resource pinning</strong> – To give both gateways identical CPU budgets, export
  any of the following before running the benchmark (works for both native and
  containerized execution):</li>
</ul>
<p><code>bash
  export VEILGATE_CPUS=1.0
  export TYK_CPUS=1.0
  export VEILGATE_CPUSET=0
  export TYK_CPUSET=1</code></p>
<p>The orchestrator applies these values via <code>docker update</code> immediately after
  <code>docker compose up</code>, ensuring repeatable runs even on noisy hosts.
- <strong>Configurable host ports</strong> – If <code>localhost:18080</code> is already taken on the
  host, export <code>VEILGATE_HOST_PORT=28080</code> (or pass <code>--veilgate-port 28080</code>
  directly to <code>python -m benchmark.run</code>). The compose stack and report links
  automatically track the overridden port, which keeps long benchmark runs from
  failing on port conflicts. The containerized runner additionally connects
  itself to the compose network so the load generator talks directly to
  <code>veilgate:8080</code> / <code>tyk-gateway:8080</code>, bypassing host-port hairpin proxies that
  often drop connections under high RPS on Colima/Docker Desktop. Set
  <code>BENCHMARK_USE_COMPOSE_NETWORK=0</code> before <code>run-container.sh</code> only if you need
  the older host-port routing for debugging.</p>
<p>Artifacts live under <code>benchmark/results/&lt;timestamp&gt;/</code>:</p>
<ul>
<li><code>raw/*.json</code> – individual k6 summaries for each gateway/scenario/run.</li>
<li><code>raw/system/*.json</code> – docker stats snapshots per run.</li>
<li><code>aggregated/run.json</code> – merged dataset consumed by the HTML report.</li>
<li><code>sink/*.jsonl</code> – Veilgate stats sink output (if enabled) with periodic route/API key stats.</li>
</ul>
<h3 id="benchmark-scenarios">Benchmark scenarios<a class="headerlink" href="#benchmark-scenarios" title="Permanent link">&para;</a></h3>
<p>The benchmark includes scenarios covering all Tyk-parity features:</p>
<ul>
<li><strong>basic-proxy</strong>: Baseline unauthenticated throughput</li>
<li><strong>rewrite-proxy</strong>: Path rewriting (<code>strip_prefix</code>/<code>add_prefix</code>)</li>
<li><strong>cors-proxy</strong>: CORS preflight and response headers</li>
<li><strong>cache-hit</strong>: HTTP caching with hit ratio metrics</li>
<li><strong>jwt-jwks</strong>: JWT validation via JWKS</li>
<li><strong>apikey-custom</strong>: Custom API key header names</li>
<li><strong>tls-preserve-host</strong>: HTTPS upstream with host header preservation</li>
<li><strong>auth-proxy</strong>: API key authentication overhead</li>
<li><strong>ratelimit-burst</strong>: Global rate limiting</li>
<li><strong>ipfilter</strong>: CIDR-based IP filtering</li>
<li><strong>ratelimit-perkey</strong>: Per-API-key rate limiting</li>
<li><strong>websocket-throughput</strong>: WebSocket handshake and message throughput</li>
</ul>
<p>Each scenario includes functional tests (correctness) and load tests (performance).
The <code>smoke</code> profile runs only <code>basic-proxy</code>; <code>ci</code> runs a subset; <code>full</code> runs all scenarios.</p>
<h2 id="running-benchmarks">Running benchmarks<a class="headerlink" href="#running-benchmarks" title="Permanent link">&para;</a></h2>
<p>For micro-level profiling (single middleware combinations, allocations, etc.)
use the Go benchmarks shipped in <code>internal/perf/</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Quick benchmark run</span>
go<span class="w"> </span><span class="nb">test</span><span class="w"> </span>-bench<span class="o">=</span>.<span class="w"> </span>./internal/perf/...

<span class="c1"># Extended run with more iterations</span>
go<span class="w"> </span><span class="nb">test</span><span class="w"> </span>-bench<span class="o">=</span>.<span class="w"> </span>-benchtime<span class="o">=</span>5s<span class="w"> </span>./internal/perf/...

<span class="c1"># With memory allocation stats</span>
go<span class="w"> </span><span class="nb">test</span><span class="w"> </span>-bench<span class="o">=</span>.<span class="w"> </span>-benchmem<span class="w"> </span>./internal/perf/...
</code></pre></div>

<h3 id="available-microbenchmarks">Available microbenchmarks<a class="headerlink" href="#available-microbenchmarks" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Benchmark</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BenchmarkGatewayRoundTrip</code></td>
<td>Basic proxy pass-through</td>
</tr>
<tr>
<td><code>BenchmarkGatewayWithCORS</code></td>
<td>CORS middleware overhead</td>
</tr>
<tr>
<td><code>BenchmarkGatewayWithRateLimit</code></td>
<td>Rate limiting middleware overhead</td>
</tr>
<tr>
<td><code>BenchmarkGatewayWithCache</code></td>
<td>Response caching (cache hit)</td>
</tr>
<tr>
<td><code>BenchmarkGatewayWithRewrite</code></td>
<td>Path rewriting overhead</td>
</tr>
<tr>
<td><code>BenchmarkGatewayWithResponseHeaders</code></td>
<td>Response header manipulation</td>
</tr>
<tr>
<td><code>BenchmarkGatewayAllFeatures</code></td>
<td>All middleware combined</td>
</tr>
<tr>
<td><code>BenchmarkGatewayLargeBody</code></td>
<td>Large request/response handling</td>
</tr>
<tr>
<td><code>BenchmarkGatewayManyRoutes</code></td>
<td>Routing with 100 routes</td>
</tr>
</tbody>
</table>
<h3 id="interpreting-results">Interpreting results<a class="headerlink" href="#interpreting-results" title="Permanent link">&para;</a></h3>
<p>Example output:</p>
<div class="codehilite"><pre><span></span><code>BenchmarkGatewayRoundTrip-4      50000     28456 ns/op    1024 B/op    12 allocs/op
</code></pre></div>

<ul>
<li><code>50000</code> – number of iterations</li>
<li><code>28456 ns/op</code> – nanoseconds per operation (~28 μs)</li>
<li><code>1024 B/op</code> – bytes allocated per operation</li>
<li><code>12 allocs/op</code> – heap allocations per operation</li>
</ul>
<h2 id="performance-tuning">Performance tuning<a class="headerlink" href="#performance-tuning" title="Permanent link">&para;</a></h2>
<h3 id="connection-pooling">Connection pooling<a class="headerlink" href="#connection-pooling" title="Permanent link">&para;</a></h3>
<p>Configure HTTP transport settings for your workload:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">server</span><span class="p">:</span>
<span class="w">  </span><span class="nt">http</span><span class="p">:</span>
<span class="w">    </span><span class="nt">max_idle_conns</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">512</span>
<span class="w">    </span><span class="nt">max_idle_conns_per_host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">128</span>
<span class="w">    </span><span class="nt">idle_conn_timeout_seconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">90</span>
</code></pre></div>

<p>More idle connections reduce connection establishment overhead but consume memory.</p>
<h3 id="rate-limiting-scope">Rate limiting scope<a class="headerlink" href="#rate-limiting-scope" title="Permanent link">&para;</a></h3>
<p>Rate limiting scope affects performance:</p>
<ul>
<li><code>route</code> – fastest, single limiter per route</li>
<li><code>ip</code> – requires IP extraction, per-IP limiters</li>
<li><code>api_key</code> – requires auth context, per-key limiters</li>
</ul>
<p>For high-throughput routes, consider <code>route</code> scope with appropriate limits.</p>
<h3 id="caching">Caching<a class="headerlink" href="#caching" title="Permanent link">&para;</a></h3>
<p>Enable caching for idempotent endpoints:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">routes</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">products-api</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/api/products/*</span>
<span class="w">    </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GET</span>
<span class="w">    </span><span class="nt">upstream_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">products</span>
<span class="w">    </span><span class="nt">cache</span><span class="p">:</span>
<span class="w">      </span><span class="nt">enable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">ttl_seconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span>
</code></pre></div>

<p>Cache hits bypass the upstream entirely, providing significant latency reduction.</p>
<h3 id="response-headers">Response headers<a class="headerlink" href="#response-headers" title="Permanent link">&para;</a></h3>
<p>Minimize header manipulation for latency-sensitive routes:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">routes</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">latency-critical</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/api/realtime/*</span>
<span class="w">    </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GET</span>
<span class="w">    </span><span class="nt">upstream_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">realtime</span>
<span class="w">    </span><span class="c1"># No response_headers section = no processing overhead</span>
</code></pre></div>

<h2 id="comparison-with-tyk">Comparison with Tyk<a class="headerlink" href="#comparison-with-tyk" title="Permanent link">&para;</a></h2>
<p>Veilgate is designed to be simpler and faster than Tyk by:</p>
<ul>
<li><strong>No embedded scripting</strong> – No JSVM or Go plugins in the hot path</li>
<li><strong>No external dependencies</strong> – No Redis/Mongo required for core functionality</li>
<li><strong>Minimal middleware</strong> – Only the middleware you configure is executed</li>
<li><strong>Efficient routing</strong> – chi router with zero-allocation path matching</li>
<li><strong>Shared transports</strong> – Connection pooling shared across routes</li>
</ul>
<p>Typical improvements over Tyk:
- 30-50% lower latency for pass-through proxy
- 60-80% lower memory footprint
- Faster cold starts (&lt; 1s vs 5-10s)</p>
<h2 id="load-testing">Load testing<a class="headerlink" href="#load-testing" title="Permanent link">&para;</a></h2>
<p>For production capacity planning, use external load testing tools:</p>
<h3 id="using-hey">Using hey<a class="headerlink" href="#using-hey" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Install hey</span>
go<span class="w"> </span>install<span class="w"> </span>github.com/rakyll/hey@latest

<span class="c1"># Basic load test</span>
hey<span class="w"> </span>-n<span class="w"> </span><span class="m">10000</span><span class="w"> </span>-c<span class="w"> </span><span class="m">100</span><span class="w"> </span>http://localhost:8080/api/health

<span class="c1"># With authentication</span>
hey<span class="w"> </span>-n<span class="w"> </span><span class="m">10000</span><span class="w"> </span>-c<span class="w"> </span><span class="m">100</span><span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;X-API-Key: your-key&quot;</span><span class="w"> </span>http://localhost:8080/api/data
</code></pre></div>

<h3 id="using-wrk">Using wrk<a class="headerlink" href="#using-wrk" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Basic test</span>
wrk<span class="w"> </span>-t4<span class="w"> </span>-c100<span class="w"> </span>-d30s<span class="w"> </span>http://localhost:8080/api/health

<span class="c1"># With script for POST requests</span>
wrk<span class="w"> </span>-t4<span class="w"> </span>-c100<span class="w"> </span>-d30s<span class="w"> </span>-s<span class="w"> </span>post.lua<span class="w"> </span>http://localhost:8080/api/data
</code></pre></div>

<h3 id="using-vegeta">Using vegeta<a class="headerlink" href="#using-vegeta" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Create target file</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;GET http://localhost:8080/api/health&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>vegeta<span class="w"> </span>attack<span class="w"> </span>-rate<span class="o">=</span><span class="m">1000</span><span class="w"> </span>-duration<span class="o">=</span>30s<span class="w"> </span><span class="p">|</span><span class="w"> </span>vegeta<span class="w"> </span>report
</code></pre></div>

<h2 id="profiling">Profiling<a class="headerlink" href="#profiling" title="Permanent link">&para;</a></h2>
<h3 id="cpu-profiling">CPU profiling<a class="headerlink" href="#cpu-profiling" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Enable pprof in admin server (if configured)</span>
go<span class="w"> </span>tool<span class="w"> </span>pprof<span class="w"> </span>http://localhost:9090/debug/pprof/profile?seconds<span class="o">=</span><span class="m">30</span>

<span class="c1"># From benchmark</span>
go<span class="w"> </span><span class="nb">test</span><span class="w"> </span>-bench<span class="o">=</span>BenchmarkGatewayRoundTrip<span class="w"> </span>-cpuprofile<span class="o">=</span>cpu.out<span class="w"> </span>./internal/perf/...
go<span class="w"> </span>tool<span class="w"> </span>pprof<span class="w"> </span>cpu.out
</code></pre></div>

<h3 id="memory-profiling">Memory profiling<a class="headerlink" href="#memory-profiling" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code>go<span class="w"> </span><span class="nb">test</span><span class="w"> </span>-bench<span class="o">=</span>BenchmarkGatewayRoundTrip<span class="w"> </span>-memprofile<span class="o">=</span>mem.out<span class="w"> </span>./internal/perf/...
go<span class="w"> </span>tool<span class="w"> </span>pprof<span class="w"> </span>mem.out
</code></pre></div>

<h3 id="trace">Trace<a class="headerlink" href="#trace" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code>go<span class="w"> </span><span class="nb">test</span><span class="w"> </span>-bench<span class="o">=</span>BenchmarkGatewayRoundTrip<span class="w"> </span>-trace<span class="o">=</span>trace.out<span class="w"> </span>./internal/perf/...
go<span class="w"> </span>tool<span class="w"> </span>trace<span class="w"> </span>trace.out
</code></pre></div>

<h2 id="production-monitoring">Production monitoring<a class="headerlink" href="#production-monitoring" title="Permanent link">&para;</a></h2>
<p>Monitor these metrics in production:</p>
<ul>
<li><code>veilgate_http_request_duration_seconds</code> – Request latency histogram</li>
<li><code>veilgate_http_requests_total</code> – Request count by route and status</li>
<li><code>veilgate_upstream_health</code> – Backend health status</li>
<li><code>veilgate_ratelimit_rejections_total</code> – Rate limit events</li>
<li>Process metrics (CPU, memory, goroutines)</li>
</ul>
<p>Set alerts for:
- p99 latency exceeding SLO
- High rate limit rejection rate
- Upstream health degradation
- Memory growth (potential leak)</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.sections", "navigation.tabs", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>